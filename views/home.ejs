<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Communist Content Aggregator</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <!-- Stylesheets imported here -->
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/helpers.css">

    <!-- Third Party Styleheets imported here -->
    <link rel="stylesheet" href="/third-party/fontawesome-6.2.1/css/fontawesome.css">
    <link rel="stylesheet" href="/third-party/fontawesome-6.2.1/css/solid.css">
</head>
<body>
    <h1>Communist Content Aggregator</h1>
    <h2>Publishers</h2>
    <%- include("publishers-available-block", { publishers_available : publishers_available }); %>
    <% if (publishers.length) { %>     
        <div class="publisher-cards">
            <!-- publisher Cards here -->
            <% publishers.forEach((publisher) => { %>
                <div class="publisher-card">
                    <h3 class="publisher-card-title">
                        <%-publisher.options.title%>
                    </h3>
                    <a href="<%=publisher.options.link%>" aria-label="Visit <%=publisher.options.title%>'s website">
                        <i class="fa fa-link" aria-hidden="true"></i>
                    </a>
                    <p class="publisher-card-description"><%-publisher.options.description%></p> 
                    <% if (publisher.articles.length) { %>
                        <div class="publisher-articles">
                        <% publisher.articles.forEach((article)=> { %>
                            <article class="publisher-article">
                                <h3 class="publisher-article-title"><%=article.title%></h3> 
                                <a 
                                    href="<%=article.link%>" 
                                    class="publisher-article-link" 
                                    aria-label="Read article on <%=publisher.options.title%>'s website"
                                >
                                    <i class="fa fa-link" aria-hidden="true"></i>
                                </a>
                                <div class="publisher-article-text">
                                    <div class="publisher-article-teaser-text"><%-article.teaser_text%><span class="teaser-text-ellipsis">...</span></div>
                                    <div class="publisher-article-body hidden"><%-article.body%></div>
                                </div>
                            </article>
                            <% }) %>
                        </div>
                    <% } %>
                </div>
            <% }) %>
            <!-- End Feed Cards-->
        </div>
    <% } %>
</body>
<footer>
</footer>
</html>